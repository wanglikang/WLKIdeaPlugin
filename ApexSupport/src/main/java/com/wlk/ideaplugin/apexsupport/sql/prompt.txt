如何借助idea插件，实现一个类似sql查询的功能，要求：

1、在编辑器区域可以自由的编写sql，并提供sql保存的功能，将sql保存到当前项目下的文件夹中（文件夹的路径可以自定义，也可以在插件的配置页面进行配置）

2、在编辑器区域编写sql的区域内，有运行的按钮，按钮被点击后，会调用某个命令行工具，这个命令行工具也是可以配置的

3、在命令行工具被执行后，需要在工具窗口自动新建一个窗口，展示命令行工具返回的文本结果，并跟进结果的内容进行json解析，解析结果为sql查询的结果，即使用表格的形式去进行展示

针对上面的功能要求，先给出完整的思路（有哪些类需要新建，各个类之间的调用关系），然后在进行代码生成